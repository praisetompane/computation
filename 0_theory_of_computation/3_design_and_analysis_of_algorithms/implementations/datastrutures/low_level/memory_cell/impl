hardware and operating system level

Maybe implement mini OS layer that can allocate and deallocate memory?